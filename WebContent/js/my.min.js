async function mobileList(){
	//const payload = {"sign":"mobileList"};
	const payload = JSON.stringify({sign:"mobileList"});
	let response = await fetch("main", {method:"post", body: payload});
	let json = await response.json();
	console.log(json.data); // 배열로 오게 만들면,이 데이터를 객체로라도 변환시킬 수 있음.
	let listContent=`
		<div class="container p-4">
		  <h2>핸드폰 목록</h2>
		  <table class="table table-hover">
		    <thead>
		      <tr>
		        <th>고유번호</th>
		        <th>모델명</th>
		        <th>가격</th>
		        <th>제조사</th>
		      </tr>
		    </thead>
		    <tbody>



		`
	json.data.forEach(function(item, index){
		console.log(item.mobileCode);
		listContent += `
				<tr>
					<td>${item.mobileCode}</td>
					<td><a href="#" onclick="detailMobile('${item.mobileCode}')">${item.model}</a></td>
					<td>${item.price}</td>
					<td>${item.company}</td>
				</tr>`;
	});
	
	listContent += `
			</tbody>
		  </table>
		</div>
	`;
	
	document.getElementById("content").innerHTML=listContent;
	
	
}
async function detailMobile(mobileCode){
	
	let response = await fetch("main", {method:"post", body: JSON.stringify ({sign:"detailMobile", mobileCode})});
	let json = await response.json();
	const item = json.data;
	
	let content = `
	<div class="container p-4">
	
	  <h2>핸드폰 상세 정보</h2>
  	  <a class="btn btn-danger" href="#" onclick="deleteMobile('${item.mobileCode}')">삭제</a> // jsp EL이 아닌 jsEL
	  <table class="table table-striped">
	      <tr>
	        <td>고유번호</td><td>${item.mobileCode}</td>
	      </tr>
	      <tr>
	        <td>모델명</td><td>${item.model}</td>
	      </tr>
	      <tr>
	        <td>가격</td><td>${item.price}</td>
	      </tr>
	      <tr>
	        <td>제조사</td><td>${item.company}</td>
	      </tr>
	  </table>
	
	</div>`;	
	
	document.getElementById("content").innerHTML=content;
}

async function deleteMobile(mobileCode){
	let response = await fetch("main", {method:"post", body: JSON.stringify ({sign:"deleteMobile", mobileCode})});
	let json = await response.json();
	alert(json.msg);
	
	let listContent=`
		<div class="container p-4">
		  <h2>핸드폰 목록</h2>
		  <table class="table table-hover">
		    <thead>
		      <tr>
		        <th>고유번호</th>
		        <th>모델명</th>
		        <th>가격</th>
		        <th>제조사</th>
		      </tr>
		    </thead>
		    <tbody>



		`
	json.data.forEach(function(item, index){
		console.log(item.mobileCode);
		listContent += `
				<tr>
					<td>${item.mobileCode}</td>
					<td><a href="#" onclick="detailMobile('${item.mobileCode}')">${item.model}</a></td>
					<td>${item.price}</td>
					<td>${item.company}</td>
				</tr>`;
	});
	
	listContent += `
			</tbody>
		  </table>
		</div>
	`;
	
	document.getElementById("content").innerHTML=listContent;
}

function registMobile(){
	let registContent = `
	<div class="container p-4">
	  <h2>핸드폰 정보 등록</h2>
	  	<input type="hidden" name="action" value="">
	    <div class="form-group">
	      <label for="mobileCode">고유번호</label>
	      <input type="text" class="form-control" id="mobileCode" placeholder="고유번호 입력">
	    </div>
	    <div class="form-group">
	      <label for="model">모델명</label>
	      <input type="text" class="form-control" id="model" placeholder="모델명 입력">
	    </div>
	    <div class="form-group">
	      <label for="price">가격</label>
	      <input type="number" class="form-control" id="price" placeholder="가격 입력" >
	    </div>
	    	    <div class="form-group">
	      <label for="company">제조사</label>
	      <input type="text" class="form-control" id="company" placeholder="제조사 입력" >
	    </div>

	    <button type="button" class="btn btn-primary" id="regist" onclick="regist()">등록</button>
	    <a class="btn btn-secondary" href="#" >취소</a>
	</div>
	`;
	document.getElementById("content").innerHTML=registContent;
}

async function regist(){
	const mobileCode = document.getElementById("mobileCode").value;
	const model = document.getElementById("model").value;
	const price = document.getElementById("price").value;
	const company = document.getElementById("company").value;
	let response = await fetch("main", {method:"post", body: JSON.stringify ({sign:"registMobile", mobileCode, model, price, company})});
	let json = await response.json();
	console.log(json);
	}