# Spring과 같은 프레임워크를 직접 만들어보고 생각 정리하기.
<img width="935" alt="스크린샷 2023-04-02 오전 11 41 42" src="https://user-images.githubusercontent.com/69618305/229328183-5258845d-294b-41bd-82b9-3acafdf401a2.png">
서블릿에 beans라는 HashMap을 만들고, 여기에 action, Controller를 넣어준다.
그리고 XmlPaser에 Xml 파일을 불러와 준다
<img width="743" alt="스크린샷 2023-04-02 오전 11 43 33" src="https://user-images.githubusercontent.com/69618305/229328226-56115716-aef3-460e-929b-3ffeb2ad261f.png">
xml은 이런 구조로 되어있고, Spring과 비슷하도록 beans라는 테그를 사용한다.
<img width="996" alt="스크린샷 2023-04-02 오전 11 45 27" src="https://user-images.githubusercontent.com/69618305/229328283-f05ae991-9715-4a4c-871e-420e5340ca1a.png">
xml을 파싱하며, key값에는 action의 이름을,value에는 생성자를 불러온뒤, 객체를 넣어주게 된다.
<img width="757" alt="스크린샷 2023-04-02 오전 11 49 04" src="https://user-images.githubusercontent.com/69618305/229328381-c1e90f89-eb7c-45d1-95a4-2e5386d16d84.png">
그뒤 서버에 요청이 들어오면, action의 따라서 value에 있는 controller를 불러주게 되고, 이 contorller의 process에 필요한것들을 넘겨줘 실행하게된다.


## 고찰
프레임워크를 사용하게 될경우,
xml을 파싱하기 위한 parser를 사용해야하고,
servlet들을 각각 생성해야 하기 때문에 객체들이 늘어나게 된다.
이 객체들은 old영역에서 존재할 것이고, eden 영역이 좁아지기 때문에, gc가 자주 일어날것이고, 성능에 악영향을 미칠것이다.
이는 메모리적으로 굉장히 좋지 않은 효율을 보여줄 수 밖에 없다.
또한 모든 코드들이 싱글톤으로 만들어지기 때문에, 다른 방법들을 사용하기가 곤란해진다.
(servelt과 생성주기를 맞춰서 쓸모없는 객체를 지울수 있는것들..)

### 그럼 프레임워크는 무조건 나쁜것인가?
현업에서 개발은 혼자하는것이 아닌 다수가 함께 해야함.
이때, 정형화되어있는 프레임워크를 사용한다면, 일정 수준의 품질은 보장하는 코드 작성이 가능함(스프링의 싱글톤)
그렇기 때문에 프레임워크는 무조건 나쁜것은 아님.
하지만 어떠한 구조로 동작하는지 알고 있어야, 문제가 생겼을때 좀더 유연하게 대처할 수 있다.
스프링개발자가 servlet으로 개발할줄 모른다는것은. 어불성설임.

무엇인가 사용할때는, 원리 와 구조를 알고 사용하자.
